import React, { useState, useEffect } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import { 
  Cpu, Zap, Landmark, Search, FileText, BarChart, Users, Eye, Target, 
  AlertCircle, Layers, Database, Plug, Settings, UserCheck, Code, 
  Terminal, Box, Clock, Tv, GraduationCap, Heart, Shield, ChevronLeft, 
  ChevronRight, Lock, Globe, TrendingUp, ShieldCheck, Rocket, Layout,
  Sparkles, ClipboardCheck, Microscope, Smartphone, Lightbulb, PieChart,
  UserPlus, BookOpen, MessageSquare, ShieldAlert, CheckCircle2, Laptop,
  UserCog, Brain, Briefcase, Activity, Bot
} from 'lucide-react';

const STATIC_IMAGE_URL = "https://i.ibb.co/LXWLn6Wc/Chat-GPT-Image-Feb-2-2026-04-07-42-PM.png";

const SLIDES = [
  {
    id: 1,
    type: 'hero',
    title: <div className="leading-[0.8] font-black uppercase text-[#0F172A] text-left">AI-FIRST<br/><span className="text-[0.7em]">Экономика Казахстана</span></div>,
    subtitle: <span className="text-[#6FEAD1] font-bold uppercase tracking-tight text-left w-full block">ИИ-трансформация государственного сектора</span>,
    content: <div className="mt-4 md:mt-6 w-full flex justify-center"><div className="h-1.5 w-32 bg-[#6FEAD1] rounded-full shadow-sm"></div></div>
  },
  {
    id: 2,
    title: "AI-First Государство",
    subtitle: "Новая парадигма управления",
    items: [
      { icon: Sparkles, t: 'Масштабируемость без роста штата' },
      { icon: Zap, t: 'Принятие решений в реальном времени' },
      { icon: ShieldCheck, t: 'Объективность и прозрачность сервисов' }
    ]
  },
  {
    id: 3,
    title: "Ключевая идея",
    subtitle: "Мы строим новую экономику",
    items: [
      { icon: Cpu, t: 'ИИ становится новой производительной силой' },
      { icon: TrendingUp, t: 'Рост эффективности больше не масштабируется людьми' },
      { icon: Landmark, t: 'Государство — главный драйвер ИИ-трансформации' }
    ]
  },
  {
    id: 4,
    title: "Глобальный контекст",
    subtitle: "AI-First экономики формируются сейчас",
    items: [
      { icon: Globe, t: 'ИИ = базовая инфраструктура (как электричество)' },
      { icon: TrendingUp, t: 'Отставание в ИИ = потеря конкурентоспособности' },
      { icon: ShieldCheck, t: 'Суверенность невозможна без собственного ИИ' }
    ]
  },
  {
    id: 5,
    title: "Почему государство",
    subtitle: "Государство — архитектор ИИ-экономики",
    items: [
      { icon: Settings, t: 'Формирует правила и стандарты' },
      { icon: Database, t: 'Владеет ключевой инфраструктурой' },
      { icon: UserPlus, t: 'Выращивает человеческий капитал' },
      { icon: Rocket, t: 'Масштабирует практики на всю страну' }
    ]
  },
  {
    id: 6,
    title: "Проблема сегодня",
    subtitle: "Цифровизация не даёт эффекта",
    type: 'problems',
    items: [
      'Автоматизация устаревших процессов',
      'Фрагментированные ИТ-системы',
      'Нет единой ИИ-стратегии',
      'Дефицит компетенций',
      'Пилоты без масштабирования'
    ]
  },
  {
    id: 7,
    title: "Целевая модель",
    subtitle: "AI-First государство",
    type: 'comparison',
    items: [
      { f: 'Ручные процессы', t: 'ИИ-агенты', i: <Bot size={14}/> },
      { f: 'Разрозненные данные', t: 'ИИ-платформа', i: <Database size={14}/> },
      { f: 'Перегрузка людей', t: 'Сотрудники + ИИ', i: <UserPlus size={14}/> },
      { f: 'Медленные решения', t: <div className="leading-tight">Гибридный<br/>интеллект</div>, i: <Cpu size={14}/> }
    ]
  },
  {
    id: 8,
    title: "Кто мы",
    subtitle: <span className="text-[#6FEAD1]">AISALA AI</span>,
    items: [
      { icon: Landmark, t: 'ИИ-партнёр Казахстана' },
      { icon: Globe, t: 'Работаем внутри страны' },
      { icon: ShieldCheck, t: 'Локализуем данные и модели' },
      { icon: Cpu, t: 'Строим суверенную ИИ-инфраструктуру' }
    ],
    footer: "Данные, модели и управление — в Казахстане"
  },
  {
    id: 9,
    title: "Институциональная модель",
    subtitle: "Кто за что отвечает",
    type: 'roles',
    items: [
      { s: 'Государство', r: 'Владелец стратегии, данных и решений' },
      { s: 'AISALA AI', r: 'Оператор и интегратор систем' },
      { s: 'ИИ', r: 'Инструмент анализа и исполнения' }
    ]
  },
  {
    id: 10,
    title: "Онбординг",
    subtitle: "Запуск трансформации",
    items: [
      { icon: Users, t: 'Установочная встреча с руководством' },
      { icon: Eye, t: 'Формирование общего понимания ИИ' },
      { icon: Target, t: 'Совместный выбор целей трансформации' }
    ],
    footer: "Результат: единый управленческий фреймворк"
  },
  {
    id: 11,
    title: "Диагностика",
    subtitle: "Аудит ИИ-зрелости",
    items: [
      { icon: Search, t: 'Анализ ключевых процессов' },
      { icon: FileText, t: 'Модель AS-IS' },
      { icon: Layout, t: 'Целевая модель TO-BE' },
      { icon: BarChart, t: 'Индекс ИИ-зрелости' }
    ],
    footer: "Результат: стратегия ИИ-трансформации"
  },
  {
    id: 12,
    title: "Стратегия",
    subtitle: "Персональный AI-playbook",
    items: [
      { icon: BarChart, t: 'SWOT-анализ и Быстрые победы' },
      { icon: Target, t: 'Тактические шаги (3–6 месяцев)' },
      { icon: Rocket, t: 'Стратегические направления' },
      { icon: TrendingUp, t: 'ROI и экономический эффект' }
    ],
    footer: "Для государства — бесплатно"
  },
  {
    id: 13,
    title: "Быстрые победы",
    subtitle: "Первые 90 дней",
    items: [
      { icon: UserCheck, t: 'ИИ-ассистенты для сотрудников' },
      { icon: MessageSquare, t: 'ИИ-обработка обращений 24/7' },
      { icon: Zap, t: 'Автоматизация 1–3 рутинных процессов' }
    ],
    footer: "Результат: измеримый эффект и доверие"
  },
  {
    id: 14,
    title: "ИИ-платформа",
    subtitle: "Суперагент",
    items: [
      { icon: Layers, t: 'Мультимодальные ИИ-модели' },
      { icon: Database, t: 'Память всего государства' },
      { icon: Plug, t: 'Интеграции с госсистемами' },
      { icon: Terminal, t: 'Автоматизация действий' },
      { icon: Code, t: 'Создание ИИ-приложений' }
    ]
  },
  {
    id: 15,
    title: "ИИ-сотрудники",
    subtitle: "Цифровая рабочая сила",
    type: 'grid_employees_5x2',
    items: ['Менеджмент', 'HR', 'SMM', 'Маркетинг', 'Продажи', 'Поддержка', 'Аналитика', 'Дизайн', 'Разработка', 'Инженерия']
  },
  {
    id: 16,
    title: "Агент-менеджер",
    subtitle: <span className="text-[#6FEAD1]">ИИ-сотрудник</span>,
    items: [
      { icon: Clock, t: 'Ведение календаря и заметок' },
      { icon: MessageSquare, t: 'Консультации клиентов и сотрудников' },
      { icon: FileText, t: 'Помощь в подготовке документов' },
      { icon: Target, t: 'Управление задачами команды' }
    ]
  },
  {
    id: 17,
    title: "HR-агент",
    subtitle: <span className="text-[#6FEAD1]">ИИ-сотрудник</span>,
    items: [
      { icon: Search, t: 'Умный поиск кандидатов' },
      { icon: Users, t: 'Автоматическое собеседование' },
      { icon: UserCheck, t: 'Онбординг и расписание' },
      { icon: Heart, t: 'Обучение и поддержка' }
    ]
  },
  {
    id: 18,
    title: "SMM-агент",
    subtitle: <span className="text-[#6FEAD1]">ИИ-сотрудник</span>,
    items: [
      { icon: Tv, t: 'Мониторинг новостей и повестки' },
      { icon: ClipboardCheck, t: 'Подготовка контент-плана' },
      { icon: Sparkles, t: 'Создание текстового и видео контента' },
      { icon: MessageSquare, t: 'Анализ обратной связи 24/7' }
    ]
  },
  {
    id: 19,
    title: "Консультации",
    subtitle: "Профессиональная поддержка",
    type: 'table',
    items: [
      { t: 'Стратегическая сессия по ИИ', d: '1 день' },
      { t: 'Оценка ИИ-автоматизации', d: '30 минут' },
      { t: 'Управление изменениями', d: '1 час' },
      { t: 'Исследования в области ИИ', d: 'Заказ' }
    ]
  },
  {
    id: 20,
    title: "Обучение",
    subtitle: "Форматы развития",
    type: 'table',
    items: [
      { t: 'AI Executive Day', d: '1 день' },
      { t: 'AI Product Hackathon', d: '1 неделю' },
      { t: 'AI Automation Bootcamp', d: '1 месяц' },
      { t: 'AI Engineer Program', d: '3 месяца' }
    ]
  },
  {
    id: 21,
    title: "AI Executive Day",
    subtitle: "Обучение",
    items: [
      { icon: UserCheck, t: 'Роль руководителя в AI-First' },
      { icon: Target, t: 'Принятие решений с ИИ' },
      { icon: AlertCircle, t: 'Управление рисками' },
      { icon: Sparkles, t: 'Практические кейсы' }
    ],
    footer: "Результат: единое понимание ИИ"
  },
  {
    id: 22,
    title: "AI Automation Bootcamp",
    subtitle: "Обучение",
    items: [
      { icon: Layout, t: 'Моделирование процессов' },
      { icon: Cpu, t: 'Проектирование ИИ-агентов' },
      { icon: Database, t: 'Работа с данными' },
      { icon: TrendingUp, t: 'Измерение финансового эффекта' }
    ],
    footer: "Результат: ИИ-агенты в процессах"
  },
  {
    id: 23,
    title: "AI Product Hackathon",
    subtitle: "Обучение",
    items: [
      { icon: Users, t: 'Проблемы граждан и бизнеса' },
      { icon: Lightbulb, t: 'Проектирование ИИ-сервисов' },
      { icon: Zap, t: 'Быстрое прототипирование' },
      { icon: Search, t: 'Проверка гипотез' }
    ],
    footer: "Результат: готовые продукты для граждан"
  },
  {
    id: 24,
    title: "AI Engineer Program",
    subtitle: "Обучение",
    items: [
      { icon: Layers, t: 'Архитектура ИИ-систем' },
      { icon: Code, t: 'Обучение и дообучение моделей' },
      { icon: Terminal, t: 'MLOps / AIOps / DataOps' },
      { icon: Lock, t: 'Безопасность и контроль' }
    ],
    footer: "Результат: внутренние инженеры"
  },
  {
    id: 25,
    title: "ИИ-таланты",
    subtitle: "Найм ИИ-талантов для государства",
    items: [
      { icon: UserCheck, t: 'AI Executives' },
      { icon: Code, t: 'AI Engineers' },
      { icon: Terminal, t: 'AI Automation Engineers' },
      { icon: Box, t: 'AI Product Engineers' }
    ]
  },
  {
    id: 26,
    title: "AI Executives",
    subtitle: "Автоматизация процессов",
    items: [
      { icon: Search, t: 'Анализ и моделирование процессов' },
      { icon: Target, t: 'Формирование ИИ-стратегии' },
      { icon: PieChart, t: 'Приоритизация ИИ-проектов' },
      { icon: TrendingUp, t: 'Контроль внедрения и эффекта' }
    ]
  },
  {
    id: 27,
    title: "AI Automation Engineer",
    subtitle: "Автоматизация процессов",
    items: [
      { icon: Layout, t: 'Проектирование процесса с ИИ' },
      { icon: Cpu, t: 'Дизайн ИИ-агента' },
      { icon: Zap, t: 'Внедрение ИИ-агента' },
      { icon: BarChart, t: 'Дашборды AIOps' }
    ],
    footer: "Эффект: снимаем −30–70% нагрузки"
  },
  {
    id: 28,
    title: "AI Product Engineer",
    subtitle: "Разработка сервисов",
    items: [
      { icon: Search, t: 'Исследование проблем граждан' },
      { icon: Layout, t: 'Проектирование ИИ-сервиса' },
      { icon: Code, t: 'Разработка ИИ-сервиса' },
      { icon: BarChart, t: 'BI-аналитика' }
    ],
    footer: "Государство как платформа"
  },
  {
    id: 29,
    title: "AI Engineer",
    subtitle: "Обучение моделей",
    items: [
      { icon: Database, t: 'Подготовка и очистка данных' },
      { icon: Cpu, t: 'Обучение и дообучение моделей' },
      { icon: Terminal, t: 'MLOps / AIOps' },
      { icon: Lock, t: 'Безопасность и аудит' }
    ],
    footer: "Суверенные ИИ-технологии"
  },
  {
    id: 30,
    title: "Экономический эффект",
    subtitle: "Что получает государство",
    type: 'table',
    items: [
      { t: 'Рутинные операции', d: '−30–70%' },
      { t: 'Скорость услуг', d: '−40–60%' },
      { t: 'Упр. решения', d: 'Обоснованные' },
      { t: 'Кадр. эффективность', d: '−20–30% ФОТ' }
    ]
  },
  {
    id: 31,
    title: <span className="whitespace-nowrap uppercase">ИИ-кейсы</span>,
    subtitle: "Где AI-First даёт эффект",
    type: 'case_hub',
    cases: [
      { i: Shield, n: 'Банки' }, { i: Tv, n: 'Медиа' }, 
      { i: GraduationCap, n: 'Образование' }, { i: Microscope, n: 'Наука' },
      { i: Heart, n: 'Медицина' }, { i: MessageSquare, n: 'Услуги' },
      { i: Smartphone, n: 'Телеком' }, { i: UserCog, n: 'Правительство' }
    ]
  },
  {
    id: 32,
    title: "Банки",
    subtitle: "ИИ-финансовая система",
    items: [
      { icon: Shield, t: 'Антифрод и риск-модели' },
      { icon: PieChart, t: 'Аналитика кредитных программ' },
      { icon: Lock, t: 'Комплаенс и отчётность' },
      { icon: TrendingUp, t: 'Макроэкономическая аналитика' }
    ],
    footer: "Эффект: устойчивость системы"
  },
  {
    id: 33,
    title: "Медиа",
    subtitle: "ИИ-коммуникации государства",
    items: [
      { icon: Tv, t: 'Анализ и планирование контента' },
      { icon: Eye, t: 'Мониторинг общественной повестки' },
      { icon: ShieldAlert, t: 'Работа с дезинформацией' },
      { icon: MessageSquare, t: 'Обратная связь с гражданами' }
    ],
    footer: "Эффект: доверие и скорость"
  },
  {
    id: 34,
    title: "Образование",
    subtitle: "ИИ-система подготовки кадров",
    items: [
      { icon: GraduationCap, t: 'Персонализированное обучение' },
      { icon: Users, t: 'ИИ-ассистенты для преподавателей' },
      { icon: BarChart, t: 'Аналитика успеваемости' },
      { icon: Rocket, t: 'Прогноз кадровых потребностей' }
    ],
    footer: "Эффект: качество образования"
  },
  {
    id: 35,
    title: "Наука",
    subtitle: "ИИ-ускорение исследований",
    items: [
      { icon: Microscope, t: 'ИИ-ассистенты исследователей' },
      { icon: BookOpen, t: 'Анализ публикаций и данных' },
      { icon: TrendingUp, t: 'Приоритезация научных программ' },
      { icon: Globe, t: 'Связка науки и экономики' }
    ],
    footer: "Эффект: рост продуктивности"
  },
  {
    id: 36,
    title: "Медицина",
    subtitle: "ИИ-здравоохранение",
    items: [
      { icon: Heart, t: 'Умная маршрутизация пациентов' },
      { icon: Microscope, t: 'ИИ-поддержка диагностики' },
      { icon: Database, t: 'Аналитика системы здравоохранения' },
      { icon: Users, t: 'Управление ресурсами' }
    ],
    footer: "Эффект: доступность услуг"
  },
  {
    id: 37,
    title: "Услуги",
    subtitle: "ИИ-сервисы для граждан",
    items: [
      { icon: MessageSquare, t: 'Обработка обращений 24/7' },
      { icon: UserCheck, t: 'Персонализация госуслуг' },
      { icon: Zap, t: 'Снижение сроков и отказов' },
      { icon: BarChart, t: 'Аналитика качества сервиса' }
    ],
    footer: "Эффект: рост удовлетворённости"
  },
  {
    id: 38,
    title: "Телеком",
    subtitle: "Цифровая связность страны",
    items: [
      { icon: Smartphone, t: 'Управление инфраструктурой' },
      { icon: BarChart, t: 'Прогноз перегрузок сетей' },
      { icon: Globe, t: 'База ИИ-экономики' },
      { icon: Shield, t: 'Контроль качества услуг' }
    ],
    footer: "Эффект: надёжная связь"
  },
  {
    id: 39,
    title: "Правительство",
    subtitle: "ИИ-ядро государства",
    items: [
      { icon: UserCheck, t: 'ИИ-ассистент руководителей' },
      { icon: ClipboardCheck, t: 'Контроль исполнения поручений' },
      { icon: Layers, t: 'Межведомственная платформа' },
      { icon: PieChart, t: 'Аналитика KPI и программ' }
    ],
    footer: "Эффект: управляемость и масштабирование"
  },
  {
    id: 40,
    title: "Суверенность",
    subtitle: "Безопасность и контроль",
    items: [
      { icon: Shield, t: 'Данные остаются в Казахстане' },
      { icon: Cpu, t: 'On-prem / Локальные модели' },
      { icon: Lock, t: 'Полный аудит и логирование' },
      { icon: UserCheck, t: 'Человек всегда ответственен' }
    ]
  },
  {
    id: 41,
    title: "Дальнейшие шаги",
    subtitle: "План на 90 дней",
    items: [
      { icon: Search, t: 'Диагностика процессов и ИИ-зрелости' },
      { icon: Zap, t: 'Внедрение готовых инструментов' },
      { icon: Settings, t: 'Обучение автоматизации' },
      { icon: Rocket, t: 'Пилот одного проекта' }
    ]
  },
  {
    id: 42,
    type: 'last',
    title: <div className="leading-[1.1] font-black uppercase text-[#0F172A] text-center w-full block">AI-First государство — <br/><span className="text-[#6FEAD1] block mt-4 md:mt-8">основа новой экономики</span></div>,
    subtitle: <div className="text-center w-full block text-slate-400 font-bold uppercase tracking-widest text-lg md:text-3xl mt-12 md:mt-16">Будущее начинается сегодня</div>,
    items: [
      { icon: TrendingUp, t: 'Новая производительность' },
      { icon: Target, t: 'Новое качество управления' },
      { icon: Users, t: 'Новые кадры и культура' },
      { icon: ShieldCheck, t: 'Технологический суверенитет' }
    ],
    footer: ""
  }
];

export default function App() {
  const [currentSlide, setCurrentSlide] = useState(0);
  const [direction, setDirection] = useState(0);

  const goToSlide = (newIdx) => {
    if (newIdx >= 0 && newIdx < SLIDES.length) {
      setDirection(newIdx > currentSlide ? 1 : -1);
      setCurrentSlide(newIdx);
    }
  };

  const slide = SLIDES[currentSlide];
  const isHero = slide.id === 1;
  const isLast = slide.type === 'last';
  const isSpecial = isHero || isLast;

  return (
    <div className="fixed inset-0 bg-[#F8FAFC] text-[#0F172A] font-sans overflow-hidden select-none flex flex-col lg:flex-row">
      
      {/* Header Logo */}
      <div className="absolute top-5 left-6 md:top-10 md:left-10 z-[300] flex items-center gap-2">
        <div className="w-5 h-5 bg-[#6FEAD1] rounded-full shadow-sm" />
        <span className="font-black text-xl md:text-3xl tracking-tighter uppercase leading-none">AISALA AI</span>
      </div>

      {/* Navigation arrows - SMALLER */}
      <div className="absolute inset-y-0 left-0 w-12 md:w-16 z-[350] flex items-center justify-center pointer-events-none">
        <button onClick={() => goToSlide(currentSlide - 1)} className={`p-2 transition-all active:scale-90 pointer-events-auto ${currentSlide === 0 ? 'opacity-0' : 'opacity-20 hover:opacity-100 text-[#0F172A]'}`}>
          <ChevronLeft size={isSpecial ? 56 : 36} strokeWidth={2.5} />
        </button>
      </div>
      <div className="absolute inset-y-0 right-0 w-12 md:w-16 z-[350] flex items-center justify-center pointer-events-none">
        <button onClick={() => goToSlide(currentSlide + 1)} className={`p-2 transition-all active:scale-90 pointer-events-auto ${currentSlide === SLIDES.length - 1 ? 'opacity-0' : 'opacity-20 hover:opacity-100 text-[#0F172A]'}`}>
          <ChevronRight size={isSpecial ? 56 : 36} strokeWidth={2.5} />
        </button>
      </div>

      {/* FLOATING AVATAR CIRCLE - ALWAYS ON TOP FOR MOBILE */}
      <div className="lg:hidden fixed bottom-10 right-10 z-[999] pointer-events-none">
        <div className="w-[18vh] h-[18vh] max-w-[150px] max-h-[150px] rounded-full overflow-hidden bg-[#6FEAD1] shadow-2xl">
          <img src={STATIC_IMAGE_URL} className="w-full h-full object-cover" style={{ objectPosition: 'center 8%' }} alt="Avatar Circle"/>
        </div>
      </div>

      {/* STATIC BACKGROUND IMAGE (DESKTOP) */}
      <div className="absolute inset-y-0 right-0 w-full lg:w-[45%] z-10 pointer-events-none overflow-hidden">
        <div className="w-full h-full relative overflow-hidden bg-[#F8FAFC] flex items-end lg:items-center">
            <img src={STATIC_IMAGE_URL} className="w-full h-full object-cover brightness-[1.03] hidden lg:block" style={{ objectPosition: 'center 15%' }} alt="Background Person" />
        </div>
      </div>

      {/* ANIMATED CONTENT SLIDER */}
      <main className="flex-1 flex flex-col lg:flex-row h-full w-full relative z-20 overflow-hidden">
        <AnimatePresence mode="wait" custom={direction}>
          <motion.div 
            key={currentSlide} 
            initial={{ opacity: 0, x: direction * 50 }} 
            animate={{ opacity: 1, x: 0 }} 
            exit={{ opacity: 0, x: direction * -50 }} 
            transition={{ duration: 0.35, ease: "easeInOut" }} 
            className="flex flex-col lg:flex-row h-full w-full relative"
          >
            {/* TEXT ZONE */}
            <div className={`
                flex-1 flex flex-col px-10 md:px-16 lg:px-24 relative overflow-hidden 
                ${isSpecial ? 'h-full justify-center lg:items-center' : 'h-full pt-24 justify-center items-start lg:h-full lg:pt-0'}
            `}>
              <div className={`max-w-3xl w-full flex flex-col ${isLast ? 'text-center items-center' : 'items-start'}`}>
                
                {/* Titles */}
                <h1 className={`font-black uppercase leading-[0.92] tracking-tight mb-1 md:mb-3 
                    ${isLast ? 'text-[clamp(1.6rem,6vh,3rem)] md:mb-2' : isHero ? 'text-[clamp(2.6rem,10.5vh,6rem)]' : 'text-[clamp(1.25rem,4.2vh,2.5rem)]'}
                `}>
                  {slide.title}
                </h1>
                
                <h2 className={`font-bold uppercase tracking-tight mb-3 md:mb-5
                    ${isLast ? 'mt-0 mb-8 md:mb-16' : isHero ? 'text-[clamp(1.1rem,3.2vh,2.3rem)]' : 'text-[clamp(0.8rem,2vh,1.2rem)] text-[#6FEAD1]'}
                    ${slide.id === 1 ? 'text-[#6FEAD1]' : ''}
                `}>
                  {slide.subtitle}
                </h2>

                <div className={`w-full overflow-y-visible pr-2 
                    ${isSpecial ? 'flex flex-col items-center space-y-4 md:space-y-6' : 'space-y-1 md:space-y-2.5'}
                    ${isHero ? 'items-start' : ''}
                `}>
                  {slide.content}

                  {/* Industry Hub Grid (30) */}
                  {slide.type === 'case_hub' && (
                    <div className="grid grid-cols-2 md:grid-cols-4 gap-2 w-full mt-2">
                        {slide.cases.map((c, i) => (
                            <div key={i} className="bg-white p-3 md:p-5 rounded-2xl border border-slate-100 shadow-sm flex flex-col items-center gap-2">
                                <c.i size={24} className="text-[#6FEAD1]"/>
                                <span className="font-bold text-slate-700 text-[9px] md:text-xs text-center uppercase tracking-wider leading-none">{c.n}</span>
                            </div>
                        ))}
                    </div>
                  )}

                  {/* Employee Grid (14): 5 rows of 2 */}
                  {slide.type === 'grid_employees_5x2' && (
                    <div className="grid grid-cols-2 grid-rows-5 gap-1.5 w-full mt-1">
                        {slide.items.map((t, i) => (
                            <div key={i} className="bg-white py-2 px-3 rounded-xl border border-slate-100 shadow-sm font-black text-center text-[9px] md:text-[11px] text-slate-500 uppercase tracking-widest leading-none flex items-center justify-center min-h-[45px]">
                                {t}
                            </div>
                        ))}
                    </div>
                  )}
                  
                  {/* Standard Item Blocks */}
                  {!isSpecial && slide.items && !['problems', 'comparison', 'roles', 'grid_employees_5x2', 'table', 'case_hub'].includes(slide.type) && slide.items.map((item, i) => (
                    <div key={i} className="flex items-center bg-white rounded-xl shadow-sm border border-slate-100/50 py-2.5 px-5 gap-4">
                      <item.icon size={18} className="text-[#6FEAD1] shrink-0" />
                      <span className="font-semibold text-slate-700 leading-tight text-xs md:text-xl">{item.t}</span>
                    </div>
                  ))}

                  {/* Problems Blocks */}
                  {slide.type === 'problems' && slide.items.map((text, i) => (
                    <div key={i} className="flex items-center gap-3 p-2.5 bg-red-50 text-red-700 rounded-xl font-bold border border-red-100 italic text-[0.75rem] md:text-lg w-full">
                      <AlertCircle size={16} className="shrink-0" />
                      <span className="leading-tight">{text}</span>
                    </div>
                  ))}

                  {/* Institutional Roles (Slide 9) */}
                  {slide.type === 'roles' && slide.items.map((item, i) => (
                    <div key={i} className="bg-white p-3.5 rounded-xl border-l-[6px] border-[#6FEAD1] shadow-sm w-full">
                        <div className="font-black text-[#0F172A] text-[9px] md:text-base uppercase tracking-widest mb-0.5">{item.s}</div>
                        <div className="font-semibold text-slate-500 text-[10px] md:text-xl leading-snug">{item.r}</div>
                    </div>
                  ))}

                  {/* Comparison Logic */}
                  {slide.type === 'comparison' && (
                    <div className="space-y-1.5 md:space-y-4 w-full mt-2">
                      <div className="grid grid-cols-2 gap-4 text-[0.5rem] md:text-sm uppercase tracking-widest font-black text-slate-400 px-1 text-center">
                        <span>Было</span><span>Становится</span>
                      </div>
                      {slide.items.map((item, i) => (
                        <div key={i} className="grid grid-cols-2 gap-2 md:gap-4">
                          <div className={`flex items-center justify-center p-2 bg-slate-100 text-slate-400 rounded-xl font-semibold italic text-center text-[10px] md:text-lg leading-tight`}>
                            {item.f}
                          </div>
                          <div className={`flex items-center justify-center gap-2 p-2 bg-[#0F172A] text-[#6FEAD1] rounded-xl font-bold shadow-lg text-center text-[10px] md:text-lg leading-tight`}>
                            {item.i} <span className="ml-1">{(typeof item.t === 'string') ? item.t : item.t}</span>
                          </div>
                        </div>
                      ))}
                    </div>
                  )}

                  {/* Tables Style */}
                  {slide.type === 'table' && (
                    <div className="w-full space-y-1.5 md:space-y-2 mt-2">
                        {slide.items.map((item, i) => (
                            <div key={i} className="flex justify-between items-center bg-white p-3 md:p-6 rounded-xl border border-slate-100 shadow-sm">
                                <span className="font-bold text-slate-700 text-[10px] md:text-xl">{item.t}</span>
                                <span className="text-[#6FEAD1] font-black text-[10px] md:text-lg uppercase whitespace-nowrap leading-none">{item.d}</span>
                            </div>
                        ))}
                    </div>
                  )}

                  {/* Final Slide Badge Bubbles - NO CLIPPING & COMPACT FONT */}
                  {isLast && (
                    <div className="flex flex-wrap justify-center gap-2.5 mt-2 max-w-xl overflow-visible pb-10">
                        {slide.items.map((item, i) => (
                            <div key={i} className="flex items-center gap-2 bg-white px-3.5 py-1.5 rounded-full shadow-lg border border-slate-50 whitespace-nowrap">
                                <item.icon size={14} className="text-[#6FEAD1] shrink-0"/>
                                <span className="font-black text-slate-400 uppercase tracking-widest text-[8px] md:text-[9px] leading-none">{item.t}</span>
                            </div>
                        ))}
                    </div>
                  )}

                  {/* Strategic Label Footers (Internal Only) */}
                  {slide.footer && !isSpecial && (
                    <div className="mt-4 p-3 md:p-6 bg-[#0F172A] rounded-xl font-bold text-[10px] md:text-xl text-white shadow-xl self-start border-l-4 border-[#6FEAD1]">
                      {slide.footer}
                    </div>
                  )}
                </div>
              </div>
            </div>

            {/* Empty Spacer for Desktop Fixed Background Logic */}
            <div className="hidden lg:block lg:flex-1 lg:w-[45%] relative" />

          </motion.div>
        </AnimatePresence>
      </main>

      <style dangerouslySetInnerHTML={{ __html: `
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
      `}} />
    </div>
  );
}
